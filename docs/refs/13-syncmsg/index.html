<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Synchronization - INScore Documentation</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="/css/inscore.css" rel="stylesheet">
        <link href="/BNF/railroad-diagrams.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">INScore Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="http://berio.grame.fr/MusicNotation/Introduction-to-INScore/">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../1-genformat/">Format of a message</a>
</li>
                                    
<li >
    <a href="../2-common/">Common Messages</a>
</li>
                                    
<li >
    <a href="../3-time/">Time Messages</a>
</li>
                                    
<li >
    <a href="../4-miscmsgs/">Miscellaneous</a>
</li>
                                    
<li >
    <a href="../5-setsect/">The set Message</a>
</li>
                                    
<li >
    <a href="../6-getsect/">The get Message</a>
</li>
                                    
<li >
    <a href="../7-specificMsg/">Specific Messages</a>
</li>
                                    
<li >
    <a href="../8-ITL/">Application Messages</a>
</li>
                                    
<li >
    <a href="../9-scene/">Scene Messages</a>
</li>
                                    
<li >
    <a href="../10-forwarding/">Messages Forwarding</a>
</li>
                                    
<li >
    <a href="../11-layers/">Layers</a>
</li>
                                    
<li >
    <a href="../12-mapping/">Mapping</a>
</li>
                                    
<li class="active">
    <a href="./">Synchronization</a>
</li>
                                    
<li >
    <a href="../14-graphsig/">Graphic signals</a>
</li>
                                    
<li >
    <a href="../15-sensors/">Sensors</a>
</li>
                                    
<li >
    <a href="../16-interaction/">Interaction</a>
</li>
                                    
<li >
    <a href="../17-scripting/">Scripting</a>
</li>
                                    
<li >
    <a href="../18-mathExpr/">Math Expressions</a>
</li>
                                    
<li >
    <a href="../19-scoreExpr/">Score Expressions</a>
</li>
                                    
<li >
    <a href="../20-plugins/">Plugins</a>
</li>
                                    
<li >
    <a href="../21-appendices/">Grammar definition</a>
</li>
                                    
<li >
    <a href="../22-changes/">Changes list</a>
</li>
                                    
<li >
    <a href="../">Index</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../rsrc/INScoreLang.pdf">Pdf documentation</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../12-mapping/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../14-graphsig/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#synchronization">Synchronization</a></li>
            <li><a href="#synchronization-modes">Synchronization modes</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<script src='/BNF/railroad-diagrams.js'></script>

<h1 id="synchronization">Synchronization</h1>
<p><a name="syncmsg"></a></p>
<p>Synchronization between components is in charge of the static <span class="OSC">sync</span> node, automatically embedded in each object. Its address is <span class="OSC">/ITL/.../<em>object</span>/sync</em> and it supports messages to add or remove a master / slave relation between components or to query the synchronizations state.</p>
<p><span class="note">Note: </span> 
A master can naturally have several slaves, but a slave can have several masters as well. In this case, it will be drawn several times, corresponding to each master's space.</p>
<p><a name="13-syncmsg-Synchronization"></a>
<a name="13-syncmsg-get"></a></p>
<div class="rail">
<span class="railtitle">sync</span>
<br /><script>
ComplexDiagram(
    Choice (0, Sequence (NonTerminal('syncIdentifier'), Choice (0, Sequence (Comment ('1'), NonTerminal('syncIdentifier'), Optional  ( OneOrMore (NonTerminal('syncmode')))), Sequence (Comment ('2'), NonTerminal('syncIdentifier'), 'del'), Comment ('3'))), Sequence (Comment ('4'), 'get', Optional  ( NonTerminal('target'))))
).addTo()

</script>
</div>

<ul>
<li><strong>[1]</strong> the <span class="OSC">slave</span> <span class="OSC">master</span> form is followed by an optional synchronization mode (see below). It adds a slave / master relation between the first and the second component.</li>
<li><strong>[2]</strong> the <span class="OSC">slave</span> <span class="OSC">master</span> <span class="OSC">del</span> form removes the specified slave/master relation.</li>
<li><strong>[3]</strong> the <span class="OSC">slave</span> form without <span class="OSC">master</span> removes all synchronizations with the slave.</li>
<li><strong>[4]</strong> the <span class="OSC">get</span> message is intended to query the synchronization state. The optional parameter is the identifier of a component. The <span class="OSC">get</span> message without parameter is equivalent to a <span class="OSC">get</span> message addressed to each object declared in the <span class="OSC">sync</span> node.</li>
</ul>
<p><a name="13-syncmsg- syncIdentifier"></a></p>
<div class="rail">
<span class="railtitle">syncIdentifier</span>
<br /><script>
ComplexDiagram(
    Choice (0, Sequence (Comment ('1'), NonTerminal('identifier')), Sequence (Comment ('2'), NonTerminal('identifier'), ':', NonTerminal('mapName')))
).addTo()

</script>
</div>

<p>Synchronization identifiers indicates 1) the name of an object or 2) the name of an object associated to a mapping name. Using the first form (i.e. without explicit mapping name), the system uses the default unnamed mapping (see section <a href="../12-mapping#mapMsg">mapMsg</a> mappings and named mappings).</p>
<p>Synchronization between components has no effect if any of the required mapping is missing (see table <a href="../12-mapping#maptable">maptable</a>).</p>
<p><span class="example">Example</span> 
Synchronizing an object on several masters:</p>
<pre><code>/ITL/scene/myParent/sync mySlave myMaster1;
/ITL/scene/myParent/sync mySlave myMaster2;
</code></pre>

<p>Synchronizing two objects using a specific mapping (the second object is assumed to be a symbolic score (<span class="OSC">gmn</span>, <span class="OSC">gmnstream</span> or <span class="OSC">gmnf</span>) which <span class="OSC">system</span> mapping has been previously requested):</p>
<pre><code>/ITL/scene/myParent/sync mySlave myMaster:system;
</code></pre>

<h2 id="synchronization-modes">Synchronization modes</h2>
<p><a name="syncmode"></a></p>
<p>Synchronizing a slave component <span class="values">A</span> to a master component <span class="values">B</span> has the following effect:</p>
<ul>
<li><span class="values">A</span> position (x) is modified to match the <span class="values">B</span> time position corresponding to <span class="values">A</span> date.</li>
<li>depending on the optional <span class="OSC">syncStretch</span> option, <span class="values">A</span> width and/or height is modified to match the  corresponding <span class="values">B</span> dimension (see below).</li>
<li>depending on the optional <span class="OSC">syncPos</span> option, <span class="values">A</span> vertical position (y) is modified. Note that the <span class="OSC">y</span> position remains free and could always be modified using a <span class="OSC">dy</span> message.</li>
<li>if <span class="values">A</span> date has no graphic correspondence in <span class="values">B</span> mapping (the date is not mapped, or out of <span class="values">B</span> mapping bounds ), <span class="values">A</span> won't be visible.</li>
</ul>
<p><a name="13-syncmsg-syncmode"></a></p>
<div class="rail">
<span class="railtitle">syncmode</span>
<br /><script>
ComplexDiagram(
    Choice (0, NonTerminal('syncHow'), NonTerminal('syncStretch'), NonTerminal('syncPos'), NonTerminal('mapName'))
).addTo()

</script>
</div>

<h3 id="using-the-master-date">Using the master date</h3>
<p><a name="syncmaster"></a></p>
<p><a name="13-syncmsg-syncHow"></a>
<a name="13-syncmsg-relative"></a>
<a name="13-syncmsg-absolute"></a></p>
<div class="rail">
<span class="railtitle">syncHow</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'relative', 'absolute')
).addTo()

</script>
</div>

<p>The synchronization mode makes use of the master time to graphic mapping to compute the slave position. It may also use the master current date, depending on the following options:</p>
<ul>
<li><span class="OSC">relative</span>: the time position where the slave appears is relative to the mapping and to the master current date (actually, it shifts the mapping from the master current date). The relative mode is used by default.</li>
<li><span class="OSC">absolute</span>: the time position where the slave appears corresponds to the mapping date only.</li>
</ul>
<p><span class="note">Note: </span> 
Use of the <span class="OSC">absolute</span> mode may take sense with nested synchronizations: let's consider an object <span class="values">A</span>, slave of <span class="values">B</span>, which is slave of <span class="values">C</span>.
In <span class="OSC">relative</span> mode and if <span class="values">A</span> and <span class="values">B</span> receive the same <span class="OSC">clock</span> messages, <span class="values">A</span> will remain at a fixed position on <span class="values">B</span> although it is moving in time.</p>
<p><span class="example">Example</span> 
Describing nested synchronizations, the first one using the <span class="OSC">absolute</span> mode:</p>
<pre><code>/ITL/scene/sync slave masterSlave absolute ;
/ITL/scene/sync masterSlave master ;
</code></pre>

<h3 id="synchronizing-an-object-duration">Synchronizing an object duration</h3>
<p><a name="syncduration"></a></p>
<p><a name="13-syncmsg-syncStretch"></a>
<a name="13-syncmsg-h"></a>
<a name="13-syncmsg-v"></a>
<a name="13-syncmsg-hv"></a></p>
<div class="rail">
<span class="railtitle">syncStretch</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'h', 'v', 'hv')
).addTo()

</script>
</div>

<p>The synchronization stretch mode has the following effect on the slave dimensions:</p>
<ul>
<li><span class="OSC">h</span>: the slave is horizontally stretched to align its begin and end dates to the corresponding master locations.</li>
<li><span class="OSC">v</span>: the slave is vertically stretched to the master map vertical dimension.</li>
<li><span class="OSC">hv</span>: combines the above parameters.</li>
</ul>
<p>By default, no stretching is applied.</p>
<p><span class="example">Example</span> 
Synchronizing two objects, aligning the slave duration to the corresponding master space and stretching the slave to the master map vertical dimension:</p>
<pre><code>/ITL/scene/sync mySlave myMaster hv ;
</code></pre>

<h3 id="controlling-the-slave-position">Controlling the slave position</h3>
<p><a name="syncPos"></a></p>
<p><a name="13-syncmsg-syncPos"></a>
<a name="13-syncmsg-syncOver"></a>
<a name="13-syncmsg-syncTop"></a>
<a name="13-syncmsg-syncBottom"></a>
<a name="13-syncmsg-syncFrame"></a></p>
<div class="rail">
<span class="railtitle">syncPos</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'syncOver', 'syncTop', 'syncBottom', 'syncFrame')
).addTo()

</script>
</div>

<p>The synchronization position mode has the following effects on the slave <span class="values">y</span> position:</p>
<ul>
<li><span class="OSC">syncOver</span>: the center of the slave is aligned to the master center.</li>
<li><span class="OSC">syncTop</span>: the bottom of the slave is aligned to the top of the master.</li>
<li><span class="OSC">syncBottom</span>: the top of the slave is aligned to the bottom of the master.</li>
<li><span class="OSC">syncFrame</span>: used to browse the master frame (see the next section).</li>
</ul>
<p>The default position mode is <span class="OSC">syncOver</span>. The <span class="OSC">y</span> attribute of the slave remains available to displacement (<span class="OSC">dy</span>). </p>
<p><span class="note">Note: </span> 
The <span class="values">y</span> position of a synchronized object remains a free attribute. To control this position, you should send <span class="OSC">dy</span> messages.  </p>
<p><span class="example">Example</span> 
Synchronizing two objects, aligning the slave duration to the corresponding master space, the slave being below the master map:</p>
<pre><code>/ITL/scene/sync mySlave myMaster h syncBottom;
</code></pre>

<h3 id="the-syncframe-mode">The syncFrame mode</h3>
<p><a name="syncFrame"></a></p>
<p>When the <span class="OSC">syncFrame</span> mode is used, the slave is placed on the frame of the master. Typically, this frame corresponds to the object bounding box that is also the object default mapping. For ellipses, arcs, lines, polygons, the frame corresponds to the border of the object. The frame duration is the object duration.  </p>
<p>Mappings and stretch options are ignored in  <span class="OSC">syncFrame</span> mode.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p><a href="https://inscore.grame.fr">INscore projects</a> Copyright &copy; 2019-2020 <a href="http://www.grame.fr">Grame-CNCM</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

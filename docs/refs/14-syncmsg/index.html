<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Synchronization - INScore Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="/css/inscore.css" rel="stylesheet" />
        <link href="/css/pubs.css" rel="stylesheet" />
        <link href="/BNF/railroad-diagrams.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Synchronization";
        var mkdocs_page_input_path = "refs/14-syncmsg.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> INScore Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Messages</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../1-introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../2-genformat/">Format of a message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../3-common/">Common Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../4-time/">Time Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../5-miscmsgs/">Miscellaneous</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6-setsect/">The set Message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../7-getsect/">The get Message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../8-specificMsg/">Specific Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../9-ITL/">Application Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../10-scene/">Scene Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../11-forwarding/">Messages Forwarding</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../12-layers/">Layers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../13-mapping/">Mapping</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Synchronization</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#synchronization-modes">Synchronization modes</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#using-the-master-date">Using the master date</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#synchronizing-an-object-duration">Synchronizing an object duration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#controlling-the-slave-position">Controlling the slave position</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#the-syncframe-mode">The syncFrame mode</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../15-graphsig/">Graphic signals</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../16-sensors/">Sensors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../17-interaction/">Events</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../18-scoreExpr/">Score Expressions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../19-plugins/">Plugins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../20-changes/">Changes list</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../">Index</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Scripting language</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/1-scripting/">Language</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/2-mathExpr/">Math. expressions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/3-appendices/">Grammar</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">INScore Web</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../web/1-introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/2-mainDiffs/">Global changes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/3-unsupported/">Unsupported messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/4-behavior/">Behavioral changes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/5-newMessages/">Specific messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/6-MIDI/">MIDI support</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/7-audioObjects/">Audio objects</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/8-communication/">Communication</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Documents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="http://berio.grame.fr/MusicNotation/Introduction-to-INScore/">Tutorial</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreMessages.pdf">Messages reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreLang.pdf">Language reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreWeb.pdf">Web reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../papers/">Papers</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Download</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/grame-cncm/inscore/releases">INScore</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">INScore Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Reference &raquo;</li>
          <li>Messages &raquo;</li>
      <li>Synchronization</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <script src='/BNF/railroad-diagrams.js'></script>

<h1 id="synchronization">Synchronization</h1>
<p><a name="syncmsg"></a></p>
<p>Synchronization between components is in charge of the static <span class="OSC">sync</span> node, automatically embedded in each object. Its address is <span class="OSC">/ITL/.../<em>object</span>/sync</em> and it supports messages to add or remove a master / slave relation between components or to query the synchronizations state.</p>
<p><span class="note">Note: </span> 
A master can naturally have several slaves, but a slave can have several masters as well. In this case, it will be drawn several times, corresponding to each master's space.</p>
<p><a name="14-syncmsg-Synchronization"></a>
<a name="14-syncmsg-get"></a></p>
<div class="rail">
<span class="railtitle">sync</span>
<br /><script>
ComplexDiagram(
    Choice (0, Sequence (NonTerminal('syncIdentifier'), Choice (0, Sequence (Comment ('1'), NonTerminal('syncIdentifier'), Optional  ( OneOrMore (NonTerminal('syncmode')))), Sequence (Comment ('2'), NonTerminal('syncIdentifier'), 'del'), Comment ('3'))), Sequence (Comment ('4'), 'get', Optional  ( NonTerminal('target'))))
).addTo()
</script>
</div>

<ul>
<li><strong>[1]</strong> the <span class="OSC">slave</span> <span class="OSC">master</span> form is followed by an optional synchronization mode (see below). It adds a slave / master relation between the first and the second component.</li>
<li><strong>[2]</strong> the <span class="OSC">slave</span> <span class="OSC">master</span> <span class="OSC">del</span> form removes the specified slave/master relation.</li>
<li><strong>[3]</strong> the <span class="OSC">slave</span> form without <span class="OSC">master</span> removes all synchronizations with the slave.</li>
<li><strong>[4]</strong> the <span class="OSC">get</span> message is intended to query the synchronization state. The optional parameter is the identifier of a component. The <span class="OSC">get</span> message without parameter is equivalent to a <span class="OSC">get</span> message addressed to each object declared in the <span class="OSC">sync</span> node.</li>
</ul>
<p><a name="14-syncmsg- syncIdentifier"></a></p>
<div class="rail">
<span class="railtitle">syncIdentifier</span>
<br /><script>
ComplexDiagram(
    Choice (0, Sequence (Comment ('1'), NonTerminal('identifier')), Sequence (Comment ('2'), NonTerminal('identifier'), ':', NonTerminal('mapName')))
).addTo()
</script>
</div>

<p>Synchronization identifiers indicates </p>
<ul>
<li>1) the name of an object. Note that you can use regular expressions to refer to a set of objects.</li>
<li>2) the name of an object associated to a mapping name. </li>
</ul>
<p>Using the first form (i.e. without explicit mapping name), the system uses the default unnamed mapping (see section <a href="../13-mapping#mapMsg">mapMsg</a> mappings and named mappings).</p>
<p>Synchronization between components has no effect if any of the required mapping is missing (see table <a href="../13-mapping#maptable">maptable</a>).</p>
<p><span class="example">Example</span> 
Synchronizing an object on several masters:</p>
<pre><code class="language-inscore">/ITL/scene/myParent/sync mySlave myMaster1;
/ITL/scene/myParent/sync mySlave myMaster2;
</code></pre>
<p>Synchronizing two objects using a specific mapping (the second object is assumed to be a symbolic score (<span class="OSC">gmn</span>, <span class="OSC">gmnstream</span> or <span class="OSC">gmnf</span>) which <span class="OSC">system</span> mapping has been previously requested):</p>
<pre><code class="language-inscore">/ITL/scene/myParent/sync mySlave myMaster:system;
</code></pre>
<h2 id="synchronization-modes">Synchronization modes</h2>
<p><a name="syncmode"></a></p>
<p>Synchronizing a slave component <span class="values">A</span> to a master component <span class="values">B</span> has the following effect:</p>
<ul>
<li><span class="values">A</span> position (x) is modified to match the <span class="values">B</span> time position corresponding to <span class="values">A</span> date.</li>
<li>depending on the optional <span class="OSC">syncStretch</span> option, <span class="values">A</span> width and/or height is modified to match the  corresponding <span class="values">B</span> dimension (see below).</li>
<li>depending on the optional <span class="OSC">syncPos</span> option, <span class="values">A</span> vertical position (y) is modified. Note that the <span class="OSC">y</span> position remains free and could always be modified using a <span class="OSC">dy</span> message.</li>
<li>if <span class="values">A</span> date has no graphic correspondence in <span class="values">B</span> mapping (the date is not mapped, or out of <span class="values">B</span> mapping bounds ), <span class="values">A</span> won't be visible.</li>
</ul>
<p><a name="14-syncmsg-syncmode"></a></p>
<div class="rail">
<span class="railtitle">syncmode</span>
<br /><script>
ComplexDiagram(
    Choice (0, NonTerminal('syncHow'), NonTerminal('syncStretch'), NonTerminal('syncPos'), NonTerminal('mapName'))
).addTo()
</script>
</div>

<h3 id="using-the-master-date">Using the master date</h3>
<p><a name="syncmaster"></a></p>
<p><a name="14-syncmsg-syncHow"></a>
<a name="14-syncmsg-relative"></a>
<a name="14-syncmsg-absolute"></a></p>
<div class="rail">
<span class="railtitle">syncHow</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'relative', 'absolute')
).addTo()
</script>
</div>

<p>The synchronization mode makes use of the master time to graphic mapping to compute the slave position. It may also use the master current date, depending on the following options:</p>
<ul>
<li><span class="OSC">relative</span>: the time position where the slave appears is relative to the mapping AND to the master current date (actually, it shifts the mapping from the master current date). The relative mode is used by default.</li>
<li><span class="OSC">absolute</span>: the time position where the slave appears corresponds to the mapping date only.</li>
</ul>
<p><span class="note">Note: </span> 
Use of the <span class="OSC">absolute</span> mode may take sense with nested synchronizations: let's consider an object <span class="values">A</span>, slave of <span class="values">B</span>, which is slave of <span class="values">C</span>.
In <span class="OSC">relative</span> mode and if <span class="values">A</span> and <span class="values">B</span> receive the same <span class="OSC">clock</span> messages, <span class="values">A</span> will remain at a fixed position on <span class="values">B</span> although it is moving in time.</p>
<p><span class="example">Example</span> 
Describing nested synchronizations, the first one using the <span class="OSC">absolute</span> mode:</p>
<pre><code class="language-inscore">/ITL/scene/sync slave masterSlave absolute ;
/ITL/scene/sync masterSlave master ;
</code></pre>
<h3 id="synchronizing-an-object-duration">Synchronizing an object duration</h3>
<p><a name="syncduration"></a></p>
<p><a name="14-syncmsg-syncStretch"></a>
<a name="14-syncmsg-h"></a>
<a name="14-syncmsg-v"></a>
<a name="14-syncmsg-hv"></a></p>
<div class="rail">
<span class="railtitle">syncStretch</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'h', 'v', 'hv')
).addTo()
</script>
</div>

<p>The synchronization stretch mode has the following effect on the slave dimensions:</p>
<ul>
<li><span class="OSC">h</span>: the slave is horizontally stretched to align its begin and end dates to the corresponding master locations.</li>
<li><span class="OSC">v</span>: the slave is vertically stretched to the master map vertical dimension.</li>
<li><span class="OSC">hv</span>: combines the above parameters.</li>
</ul>
<p>By default, no stretching is applied.</p>
<p><span class="example">Example</span> 
Synchronizing two objects, aligning the slave duration to the corresponding master space and stretching the slave to the master map vertical dimension:</p>
<pre><code class="language-inscore">/ITL/scene/sync mySlave myMaster hv ;
</code></pre>
<h3 id="controlling-the-slave-position">Controlling the slave position</h3>
<p><a name="syncPos"></a></p>
<p><a name="14-syncmsg-syncPos"></a>
<a name="14-syncmsg-syncOver"></a>
<a name="14-syncmsg-syncTop"></a>
<a name="14-syncmsg-syncBottom"></a>
<a name="14-syncmsg-syncFrame"></a></p>
<div class="rail">
<span class="railtitle">syncPos</span>
<br /><script>
ComplexDiagram(
    Choice (0, 'syncOver', 'syncTop', 'syncBottom', 'syncFrame')
).addTo()
</script>
</div>

<p>The synchronization position mode has the following effects on the slave <span class="values">y</span> position:</p>
<ul>
<li><span class="OSC">syncOver</span>: the center of the slave is aligned to the master center.</li>
<li><span class="OSC">syncTop</span>: the bottom of the slave is aligned to the top of the master.</li>
<li><span class="OSC">syncBottom</span>: the top of the slave is aligned to the bottom of the master.</li>
<li><span class="OSC">syncFrame</span>: used to browse the master frame (see the next section).</li>
</ul>
<p>The default position mode is <span class="OSC">syncOver</span>. The <span class="OSC">y</span> attribute of the slave remains available to displacement (<span class="OSC">dy</span>). </p>
<p><span class="note">Note: </span> 
The <span class="values">y</span> position of a synchronized object remains a free attribute. To control this position, you should send <span class="OSC">dy</span> messages.  </p>
<p><span class="example">Example</span> 
Synchronizing two objects, aligning the slave duration to the corresponding master space, the slave being below the master map:</p>
<pre><code class="language-inscore">/ITL/scene/sync mySlave myMaster h syncBottom;
</code></pre>
<h3 id="the-syncframe-mode">The syncFrame mode</h3>
<p><a name="syncFrame"></a></p>
<p>When the <span class="OSC">syncFrame</span> mode is used, the slave is placed on the frame of the master. Typically, this frame corresponds to the object bounding box that is also the object default mapping. For ellipses, arcs, lines, polygons, the frame corresponds to the border of the object. The frame duration is the object duration.  </p>
<p>Mappings and stretch options are ignored in  <span class="OSC">syncFrame</span> mode.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../13-mapping/" class="btn btn-neutral float-left" title="Mapping"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../15-graphsig/" class="btn btn-neutral float-right" title="Graphic signals">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p><a href="https://inscore.grame.fr">INscore projects</a> Copyright &copy; 2019-2021 <a href="http://www.grame.fr">Grame-CNCM</a></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../13-mapping/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../15-graphsig/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="/js/inscore.js" defer></script>
      <script src="/js/pubs.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

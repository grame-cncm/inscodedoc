<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Format of a message - INScore Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="/css/inscore.css" rel="stylesheet" />
        <link href="/css/pubs.css" rel="stylesheet" />
        <link href="/BNF/railroad-diagrams.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Format of a message";
        var mkdocs_page_input_path = "refs/2-genformat.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> INScore Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Messages</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../1-introduction/">Introduction</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Format of a message</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#address-space">Address space</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#aliases">Aliases</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#scaling">Scaling</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#using-more-than-one-implicit-message">Using more than one implicit message</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../3-common/">Common Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../4-time/">Time Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../5-miscmsgs/">Miscellaneous</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../6-setsect/">The set Message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../7-getsect/">The get Message</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../8-specificMsg/">Specific Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../9-ITL/">Application Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../10-scene/">Scene Messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../11-forwarding/">Messages Forwarding</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../12-layers/">Layers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../13-mapping/">Mapping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../14-syncmsg/">Synchronization</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../15-graphsig/">Graphic signals</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../16-sensors/">Sensors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../17-interaction/">Events</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../18-scoreExpr/">Score Expressions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../19-plugins/">Plugins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../20-changes/">Changes list</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../">Index</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Scripting language</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/1-scripting/">Language</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/2-mathExpr/">Math. expressions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../lang/3-appendices/">Grammar</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">INScore Web</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../web/1-introduction/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/2-mainDiffs/">Global changes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/3-unsupported/">Unsupported messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/4-behavior/">Behavioral changes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/5-newMessages/">Specific messages</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/6-MIDI/">MIDI support</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/7-audioObjects/">Audio objects</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../web/8-communication/">Communication</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Documents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="http://berio.grame.fr/MusicNotation/Introduction-to-INScore/">Tutorial</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreMessages.pdf">Messages reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreLang.pdf">Language reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rsrc/INScoreWeb.pdf">Web reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../papers/">Papers</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Download</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/grame-cncm/inscore/releases">INScore</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">INScore Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Reference &raquo;</li>
          <li>Messages &raquo;</li>
      <li>Format of a message</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <script src='/BNF/railroad-diagrams.js'></script>

<h1 id="general-format">General format</h1>
<p><a name="genformat"></a></p>
<p>An OSC message is made of an OSC address, followed by a message string, followed by zero to n parameters. The message string could be viewed as the method name of the object identified by the OSC address.
The OSC address could be string or a regular expression matching several objects.</p>
<div class="rail">
<span class="railtitle">OSCMessage</span>
<br /><script>
ComplexDiagram(
    Sequence (NonTerminal('OSCAddress'), NonTerminal('message'), Optional (NonTerminal('parameters')) )
).addTo()
</script>
</div>
<p><span class="example">Example</span> 
Sending the message <span class="OSC">x</span> to the object which address is <span class="OSC">/ITL/scene/score</span> with <span class="OSC">0.5</span> as parameter.</p>
<pre><code class="language-inscore">/ITL/scene/score x 0.5;
</code></pre>
<p>The address is similar to a Unix path and supports regular expressions as defined by the <a href=http://opensoundcontrol.org/>OSC specification</a>. This address scheme is extended to address any host and applications (see section <a href="../17-interaction#interaction">interaction</a>).</p>
<p><span class="note">Note: </span> A valid legal OSC address always starts with <span class="OSC">/ITL</span> that is the application address and that is also used as a discriminant for incoming messages.</p>
<div class="rail">
<span class="railtitle">OSCAddress</span>
<br /><script>
ComplexDiagram(
    Sequence ('/', OneOrMore (Choice (0, NonTerminal('identifier'), NonTerminal('regexp'))))
).addTo()
</script>
</div>

<p>Identifiers may include letters, hyphen, underscore and numbers (apart at first position for the latter).</p>
<div class="rail">
<span class="railtitle">identifier</span>
<br /><script>
ComplexDiagram(
    Sequence ('[-_a-zA-Z]', OneOrMore ('[-_a-zA-Z0-9]]'))
).addTo()
</script>
</div>

<p>Some specific nodes (like <strong>signals</strong> - see section <a href="../15-graphsig#ssignal">ssignal</a>) accept OSC messages without message string:</p>
<div class="rail">
<span class="railtitle">SigOSCMessage</span>
<br /><script>
ComplexDiagram(
    Sequence (NonTerminal('OSCAddress'), NonTerminal('parameters'))
).addTo()
</script>
</div>

<h2 id="parameters">Parameters</h2>
<p><a name="params"></a>
Message parameters types are the OSC types <strong>int32</strong>, <strong>float32</strong> and <strong>OSC-string</strong>. In the remainder of this document, they are used as terminal symbols, denoted by <span class="terminal">int32</span>, <span class="terminal">float32</span> and <span class="terminal">string</span>. </p>
<p>When used in a script file, <span class="terminal">string</span> should be single or double quoted when they include characters not allowed in identifiers (space, punctuation marks, etc.).
If an ambiguous double or single quote is part of the string, it can be escaped using a '\'.</p>
<p>Parameters types policy is relaxed: the system makes its best to convert a parameter to the expected type, which depend on the message string. With an incorrect type and when no conversion is applied, an incorrect parameter message error is triggered.</p>
<p>The system is strict regarding the number of expected parameters.</p>
<h2 id="address-space">Address space</h2>
<p><a name="addrspace"></a>
The OSC address space is made of static and dynamic nodes, hierarchically organized as in figure <a href="../2-genformat#fig:addrspace">fig:addrspace</a>:</p>
<p><a name="fig:addrspace"></a>
<img alt="fig:addrspace" src="../imgs/address_space.png" />  <br />
<span class='caption'>The OSC address space. Nodes in italic/blue are dynamic nodes.</span></p>
<p>OSC messages are accepted at any level of the hierarchy:</p>
<ul>
<li>
<p><strong>the application level</strong> responds to messages for application management (udp ports management, loading files, query messages). </p>
</li>
<li>
<p><strong>the scene level</strong> contains <strong>scores</strong> that are associated to a window and respond to specific scene management messages. 
It includes a static node named <span class="OSC">stats</span> that collects information about incoming messages, a static <span class="OSC">log</span> node that control an embedded log window.</p>
</li>
<li>
<p><strong>the component level</strong> contains the score components and 3 static nodes:</p>
</li>
<li>
<p>a <strong>signal</strong> node that may be viewed as a folder containing signals</p>
</li>
<li>a <strong>sync</strong> node, in charge of the synchronization messages</li>
<li>a <strong>javascript</strong> node, that may be adressed to run javascript code dynamically.</li>
</ul>
<p>Each component includes a static node named <span class="OSC">debug</span> that provides debugging information.
-  <strong>the signals level</strong> contains signals i.e. objects that accept data streams and that may be graphically rendered as a scene component (see Signals and Graphic signals section <a href="../15-graphsig#graphsig">graphsig</a>).</p>
<p><span class="note">Note: </span> Since version 1.05, each component of a score may also be a container and thus, the hierarchy described above has a potential infinite depth level. Note also that a <span class="OSC">sync</span> node is present at each level. </p>
<h2 id="aliases">Aliases</h2>
<p><a name="alias"></a>
An alias mechanism allows an arbitrary OSC address to be used in place of a real address. An <span class="OSC">alias</span> message is provided to describe aliases: </p>
<p><a name="2-genformat-alias"></a></p>
<div class="rail">
<span class="railtitle">alias</span>
<br /><script>
ComplexDiagram(
    Sequence (NonTerminal('OSCAddress'), 'alias', Choice (0, Sequence (Comment ('1'), NonTerminal('OSCAlias'), Optional (OneOrMore (Sequence (NonTerminal('message'), Optional ('[n,m]') ))) ), Comment ('2')))
).addTo()
</script>
</div>

<ul>
<li><strong>[1]</strong> sets <span class="OSC">OSCAlias</span> as an alias of <span class="OSC">OSCAddress</span>. The alias may be optionally followed by message strings which are then taken as implied messages. These messages can also be optionally followed by a scaling specification.</li>
<li><strong>[2]</strong> removes <span class="OSC">OSCAddress</span> aliases.</li>
</ul>
<p><span class="note">Note: </span> Regular expressions are not supported by the alias mechanism and could lead to unpredictable results.</p>
<p><span class="example">Example</span></p>
<pre><code class="language-inscore"># makes the address /ITL/scene/myobject available using /1/fader1
/ITL/scene/myobject alias '/1/fader1';

# the following input message:
/1/fader1 0.5;
# will be translated into:
/ITL/scene/myobject 0.5;
</code></pre>
<pre><code class="language-inscore"># create an alias with an implicit 'x' message
/ITL/scene/myobject alias '/1/fader1' x;

# the following input message:
/1/fader1 0.5;
# will be translated into:
/ITL/scene/myobject x 0.5;
</code></pre>
<h3 id="scaling">Scaling</h3>
<p><a name="scaling"></a>
In INScore, the parameter values are generally in the range [-1, 1]. However, some devices can generate messages with their own values range (e. g. accelerometers). An optional scaling string allows to convert any input range into the [-1, 1] range.</p>
<p>The general form of the scaling string is <span class="OSC">[n,m]</span>, where <script type="math/tex">n</script> and <script type="math/tex">m</script> are 2 numbers describing the minimum and maximum input values. Any input value <script type="math/tex">v</script> is then transformed into a value <script type="math/tex">v'</script> such that:
<script type="math/tex; mode=display">
    v' = 2 (v-n)/(n-m) - 1
</script>
</p>
<p><span class="example">Example</span></p>
<pre><code class="language-inscore"># create an alias with an implicit 'x' message using a scaling specification
/ITL/scene/myobject alias '/1/fader1' x[0,100];

# the following input message:
/1/fader1 5;
# will be translated into:
/ITL/scene/myobject x -0.9;
</code></pre>
<h3 id="using-more-than-one-implicit-message">Using more than one implicit message</h3>
<p><a name="implicitmsg"></a>
You can use an arbitrary number of message strings in an <span class="OSC">alias</span> message. In any case, an input message with the corresponding values is expected. For example, when the <span class="OSC">alias</span> message has 3 messages strings, input messages are expected to have 3 associated values. These values are distributed in sequence with each message string, which also means that the input message is translated into 3 different messages.</p>
<p><span class="example">Example</span></p>
<pre><code class="language-inscore"># create an alias with implicit 'x' 'y' and 'angle' messages using scaling
/ITL/scene/myobject alias '/1/fader1' x[0,100] y[0,100] angle;

# the following input message:
/1/fader1 5 60 12;
# will be translated into:
/ITL/scene/myobject x -0.9;
/ITL/scene/myobject y  0.2;
/ITL/scene/myobject angle 12;
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../1-introduction/" class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../3-common/" class="btn btn-neutral float-right" title="Common Messages">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p><a href="https://inscore.grame.fr">INscore projects</a> Copyright &copy; 2019-2021 <a href="http://www.grame.fr">Grame-CNCM</a></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../1-introduction/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../3-common/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="/js/inscore.js" defer></script>
      <script src="/js/pubs.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
